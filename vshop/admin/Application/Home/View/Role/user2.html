{// 引入标签库 }
<tagLib name="html" />
{// 加载头部公共文件 }
<include file="Public:header" />
<!-- 菜单区域  -->
<style>
select.multiSelect{width:100%; border:0px; padding:0px; margin:0px; overflow:hidden; background:white; font:100%/1.0em Arial,Helvetica,sans-serif; color:#444}
</style>
<!-- 主页面开始 -->
<div id="main" class="main" >
<load href="__PUBLIC__/Js/prototype.js" />
<load href="__PUBLIC__/Js/mootools.js" />
<load href="__PUBLIC__/Js/Form/MultiSelect.js" />
<!-- 主体内容  -->
<div class="content" >
<div class="title">组用户列表 [ <a href="__URL__">返 回</a> ]</div>
<!--  功能组区域  -->
<script language="JavaScript">
<!--
function saveAccess(){
ThinkAjax.sendForm('form1','__URL__/setUser/');
}
function goType(type){
	window.location = '?type='+type;
}


function usersearch(){
  var key = jQuery('#search').val();
  jQuery.ajax({
    type:"POST",
	url:URL+'/usersearch',
	data:"key="+key+"&gr={$Think.get.id}",
	success:function(msg){
	 alert(msg);return;
	 var objs = eval('('+msg+')');
	 html = '';
	 //var html = '<select name="cid">';
	 for(i=0;i<objs.length;i++){
		//html += '<option value='+objs[i].id+'>'+objs[i].account+'   '+objs[i].nickname+'</option>';
		if(objs[i].check==1){
		  html += '<div class="customMultipleSelect_option" style="padding-left: 20px; cursor: default;"><input type="checkbox"  checked="" value="'+objs[i].id+'" style="margin-left: -16px; margin-right: 5px; margin-top: -2px;" name="groupUserId[]">'+objs[i].account+' '+objs[i].nickname+'</div>';	
		}else{
		  html += '<div class="customMultipleSelect_option" style="padding-left: 20px; cursor: default;"><input type="checkbox" value="'+objs[i].id+'" style="margin-left: -16px; margin-right: 5px; margin-top: -2px;" name="groupUserId[]">'+objs[i].account+' '+objs[i].nickname+'</div>';		
		}
	 }
	 //html += '</select>';
	 //jQuery('#sourceS').html(html);
	 jQuery('.customMultipleSelect').html(html);
	}
  })
}

function usersearch1(){
  jQuery('.customMultipleSelect div').each(function(){
    jQuery(this).contents('周').find('input').attr('checked',true);
  });
}
//-->
</script>
<div id="result" class="result none"></div>
<form method='post' id="form1">
<table class="select" style="width:265px" ALIGN='center'><tr><td height="5" colspan="3" class="topTd" ></td></tr><tr><Th class="tRight">当前组：<html:select name="groupId" change="location.href = '__URL__/user/id/'+this.options[this.selectedIndex].value;" first="选择组" style="medium" options="groupList" selected="selectGroupId" />
</Th></tr>

<tr>
	<Th colspan=2 align="right"><div class="fLeft"><input name="search" id="search" type="text"></div>
<input type="button" value="查 询" onclick="usersearch()" class="submit hMargin small " /></Th>
</tr>
<tr>
<td><a href="__URL__/user/id/{$Think.get.id}/h/1" <eq name="Think.get.h" value="1">style="color:red"</eq>>有权限</a>&nbsp;&nbsp;<a href="__URL__/user/id/{$Think.get.id}/h/2" <eq name="Think.get.h" value="2">style="color:red"</eq>>无权限</a>&nbsp;&nbsp;<a href="__URL__/user/id/{$Think.get.id}" <eq name="Think.get.h" value="">style="color:red"</eq>>全部</a></td>
</tr>
<tr><td>
<html:select name="groupUserId[]" id="sourceS" options="userList" selected="groupUserList"  multiple="true" style="multiSelect" size="15" />
</td>
</tr> 
<tr>
<td  class="row tCenter" >
<input type="button" onclick="allSelect()" value="全 选" class="submit  ">
<input type="button" onclick="InverSelect()" value="反 选" class="submit  ">
<input type="button" onclick="allUnSelect()" value="全 否" class="submit ">
<input type="button" onclick="saveAccess()" value="保 存" class="submit ">
<input type="hidden" name="groupId" VALUE="{$Think.get.id}" >
<input type="hidden" name="ajax" VALUE="1">
</td>
</tr>
<tr>
<td height="5" class="bottomTd" >
</td>
</tr>
</table>
</form>
</div>
<!-- 主体内容结束 -->
</div>
<!-- 主页面结束 -->
<include file="Public:footer" />